<div class="container">
  <h1>Foster Applications</h1>
    <!-- Pending and Archived tabs -->
  <div class="mb-5 mt-3">
    <ul class="nav nav-tabs">
      <li class="nav-item">
        <a class="nav-link" routerLink="/admin/fosterapplications" routerLinkActive="active">Pending Applications</a>
      </li>
      <li class="nav-item">
        <!-- <a class="nav-link" href="#">Archived</a> -->
        <a class="nav-link active">
          Rejected Applications
        </a>
      </li>
    </ul>
  </div>

  
  <!-- Application List body -->
  <div class="container">
    <!-- displays when the page is waiting for a reply from the server -->
    <ng-container *ngIf="this.isLoading">
      <div class="row justify-content-center">
        <div class="spinner-border text-danger" role="status">
          <span class="sr-only">Loading...</span>
        </div>
      </div>
    </ng-container>
    <!-- displays when the page has received content and is ready to load -->
    <ng-container *ngIf="!this.isLoading && this.appList.length === 0">
      <div class="row justify-content-center">
        <h3>No new applications to display!</h3>
      </div>
    </ng-container>
    <!-- displays when loading is finished but no items exist to display -->


    <table mat-table [dataSource]="appList" class="mat-elevation-z8 mt-5" matSort width="100%">
      <ng-container matColumnDef="applicant">
        <th mat-header-cell *matHeaderCellDef class="th" mat-sort-header>Applicant</th>
          <td mat-cell *matCellDef="let fetched">{{fetched.fname + ' ' + fetched.lname}}</td>
      </ng-container>
  
      <ng-container matColumnDef="submissionDate">
        <th mat-header-cell *matHeaderCellDef class="th" mat-sort-header> Submission date</th>
        <td mat-cell *matCellDef="let fetched">{{fetched.submissionDate}}</td>
      </ng-container>
  
      <ng-container matColumnDef="rejectionNote">
        <th mat-header-cell *matHeaderCellDef class="th" mat-sort-header>Reason for Rejection</th>
        <td mat-cell *matCellDef="let fetched">{{fetched.rejectionReason}}</td>
      </ng-container>
  
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef class="th" mat-sort-header> Actions</th>
        <td mat-cell *matCellDef="let fetched" class="pre">
          <button class="btn btn-outline-success ml-1 mr-1" data-toggle="modal"
          attr.data-target="#accept{{ fetched.id }}">
          Mark as Pending
          </button>
          <!-- Mark as Pending Modal -->
          <div class="modal" id="accept{{ fetched.id }}">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">
                    Mark Application to pending
                    {{ fetched.lname }}?
                  </h5>
                  <button class="close" data-dismiss="modal">
                    &times;
                  </button>
                </div>
                <div class="modal-body">
                  <p>
                    You are about to send {{ fetched.fname }} {{ fetched.lname }}'s application back to the pending list.
                  </p>
                </div>
                <div class="modal-footer">
                  <button class="btn btn-success" data-dismiss="modal"
                    (click)="sendToPending(fetched.id)">
                    Confirm
                  </button>
                  <button class="btn btn-secondary" data-dismiss="modal">
                    Cancel
                  </button>
                </div>
              </div>
            </div>
          </div>
          <!-- End Of Modal -->
          <button class="btn btn-outline-danger ml-1 mr-1" data-toggle="modal"
          attr.data-target="#reject{{ fetched.id }}">
                    Delete Application
          </button>
          <!-- Delete Modal -->
          <div class="modal" id="reject{{ fetched.id }}">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">
                    Delete {{ fetched.fname }}
                    {{ fetched.lname }}?
                  </h5>
                  <button class="close" data-dismiss="modal">
                    &times;
                  </button>
                </div>
                <div class="modal-body">
                  <p>
                    You are about to PERMANENTLY delete {{ fetched.fname }}
                    {{ fetched.lname }}'s foster application.
                  </p>
                </div>
                <div class="modal-footer">
                  <button class="btn btn-danger" data-dismiss="modal" (click)="rejectApplication(fetched.id)">
                    Delete Application
                  </button>
                  <button class="btn btn-secondary" data-dismiss="modal">
                    Cancel
                  </button>
                </div>
              </div>
            </div>
          </div>
          <!-- End Of Modal -->
        </td>
      </ng-container>
  
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr class="tableRow" mat-row *matRowDef="let row; columns: displayedColumns;" (click)="getRecord(row.id)" data-toggle="modal"
        data-target="#modalCatInfo" style="pointer:cursor">
      </tr>
  
    </table>
    <mat-paginator [pageSizeOptions]="[5, 10, 20,50,100,500]" showFirstLastButtons></mat-paginator>
  </div>


  
</div>